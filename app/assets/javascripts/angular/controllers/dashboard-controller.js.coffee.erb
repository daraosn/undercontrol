class DashboardController
  constructor: ($scope, $q, Thing) ->
    'ngInject'
    @Thing = Thing
    @$scope = $scope
    
    window.things = $scope.things = Thing.all()
    $scope.addThing = @addThing
    $scope.alarmActions = {
      <% Action.types.each do |key, name| %>
      '<%=key%>'  : '<%=name%>'
      <% end %>
    }

  addThing: =>
    @Thing.create (thing) => @$scope.things.push thing

angular.module('App').controller 'DashboardController', DashboardController